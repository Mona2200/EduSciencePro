@using EduSciencePro.ViewModels.Request
@model EditUserViewModel
@{
    ViewData["Title"] = "Редактирование профиля";
    Layout = "_Layout";
    string FirstName = Model.UserViewModel.FullName.Split(' ', StringSplitOptions.RemoveEmptyEntries).ToArray()[0];
    string LasName = Model.UserViewModel.FullName.Split(' ', StringSplitOptions.RemoveEmptyEntries).ToArray()[1];
    string MiddleName = Model.UserViewModel.FullName.Split(' ', StringSplitOptions.RemoveEmptyEntries).ToArray()[2];

    var year = Model.UserViewModel.Birthday.Split('.', StringSplitOptions.RemoveEmptyEntries).ToArray()[2];
    var month = Model.UserViewModel.Birthday.Split('.', StringSplitOptions.RemoveEmptyEntries).ToArray()[1];
    if (month.Length == 1)
        month = $"0{month}";
    var day = Model.UserViewModel.Birthday.Split('.', StringSplitOptions.RemoveEmptyEntries).ToArray()[0];
    if (day.Length == 1)
        day = $"0{day}";
    string Birthday = $"{year}-{month}-{day}";

    string TypeUsers = "";
    foreach (var typeU in Model.UserViewModel.TypeUsers)
    {
        TypeUsers += typeU.Id + " ";
    }
}
<div class="col-md-4 text-center">
    <form enctype="multipart/form-data" class="m-3" method="post" asp-controller="User" asp-action="EditUser">

        <h3 class="mb-5 mt-5">Редактирование профиля</h3>

        <label asp-for="AddUserViewModel.FirstName" class="w-100 text-start label_input"></label>
        <p><input class="text-center w-100 p-1" placeholder="Имя" asp-for="AddUserViewModel.FirstName" value="@FirstName"></p>
        <p><span asp-validation-for="AddUserViewModel.FirstName" class="text-danger mb-3"></span></p>

        <label asp-for="AddUserViewModel.LastName" class="w-100 text-start label_input"></label>
        <p><input class="text-center w-100 p-1" placeholder="Фамилия" asp-for="AddUserViewModel.LastName" value="@LasName"></p>
        <p><span asp-validation-for="AddUserViewModel.LastName" class="text-danger mb-3"></span></p>

        <label asp-for="AddUserViewModel.MiddleName" class="w-100 text-start label_input"></label>
        <p><input class="text-center w-100 p-1" placeholder="Отчество" asp-for="AddUserViewModel.MiddleName" value="@MiddleName"></p>
        <p><span asp-validation-for="AddUserViewModel.MiddleName" class="text-danger mb-3"></span></p>

        <div class="d-flex flex-md-row flex-sm-column">
            <div class="d-inline-block mr-2 w-50">
                <label asp-for="AddUserViewModel.Gender" class="w-100 text-start label_input"></label>
                <p>
                    <select size="1" class="text-center w-100 p-1" asp-for="AddUserViewModel.Gender">
                        @if (Model.UserViewModel.Gender == "Мужской")
                        {
                            <option value="Мужской" selected>Мужской</option>
                            <option value="Женский">Женский</option>
                        }
                        else
                        {
                            <option value="Мужской">Мужской</option>
                            <option value="Женский" selected>Женский</option>
                        }

                    </select>
                </p>
                <p><span asp-validation-for="AddUserViewModel.Gender" class="text-danger mb-3"></span></p>
            </div>

            <div class="d-inline-block w-50">
                <label asp-for="AddUserViewModel.Birthday" class="w-100 text-center"></label>
                <p><input type="date" class="text-center w-100 p-1" value="@Birthday" asp-for="AddUserViewModel.Birthday"></p>
                <p><span asp-validation-for="AddUserViewModel.Birthday" class="text-danger mb-3"></span></p>
            </div>
        </div>

        <input class="d-none" id="types_user" asp-for="AddUserViewModel.TypeUsers" value="@TypeUsers">

        <label asp-for="AddUserViewModel.TypeUsers" class="w-100 text-start label_input"></label>
        @foreach (var type in Model.Types)
        {
            if (Model.UserViewModel.TypeUsers.Contains(type))
            {
                           <p class="text-start mt-4 p-2 type_user"><input class="checkbox" type="checkbox" value="@type.Id" checked><span class="before_checkbox checked">@type.Name</span></p>
            }
            else
            {
               <p class="text-start mt-4 p-2 type_user"><input class="checkbox" type="checkbox" value="@type.Id"><span class="before_checkbox">@type.Name</span></p>
            }

        }
        <p><span asp-validation-for="AddUserViewModel.TypeUsers" class="text-danger mb-3"></span></p>

                <label asp-for="AddUserViewModel.Email" class="w-100 text-start label_input"></label>
        <p><input class="text-center w-100 p-1" placeholder="Email" asp-for="AddUserViewModel.Email" value="@Model.UserViewModel.Email" disabled><a class="ml-2 position-absolute" style="transform: translateY(25%);">Редактировать</a></p>
        <p><span asp-validation-for="AddUserViewModel.Email" class="text-danger mb-3"></span></p>

                <label asp-for="AddUserViewModel.Password" class="w-100 text-start label_input"></label>
        <p><input class="text-center w-100 p-1" placeholder="Пароль" asp-for="AddUserViewModel.Password" disabled><a class="ml-2 position-absolute" style="transform: translateY(25%);">Редактировать</a></p>
        <p><span asp-validation-for="AddUserViewModel.Password" class="text-danger mb-3"></span></p>

        <label asp-for="AddUserViewModel.Img" class="w-100 text-start label_input"></label>
        <p><input type="file" class="text-center w-100 p-1" placeholder="Выберите файл" accept="image/jpeg,image/png" asp-for="AddUserViewModel.Img"></p>

        <p class="text-start mt-4 p-2"><input class="checkbox" type="checkbox" asp-for="Consent" value="true"><span class="before_checkbox">Согласие на сбор информации. Политика конфиденциальности.</span></p>
        <p><span asp-validation-for="Consent" class="text-danger mb-3"></span></p>

        <p><button class="button form-control-plaintext m-auto w-50 mt-4">Сохранить</button></p>

    </form>

</div>
